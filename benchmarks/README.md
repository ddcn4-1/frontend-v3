# Build Performance Benchmarks

ì´ ë””ë ‰í† ë¦¬ëŠ” GitHub Actions ë¹Œë“œ ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

## ğŸ“Š ë²¤ì¹˜ë§ˆí¬ ì‹¤í–‰ ë°©ë²•

### 1. ğŸš€ í•œ ë²ˆì— ì—¬ëŸ¬ ì„¤ì • ë¹„êµ (ê¶Œì¥)

1. GitHub ì €ì¥ì†Œì˜ **Actions** íƒ­ìœ¼ë¡œ ì´ë™
2. ì™¼ìª½ ì‚¬ì´ë“œë°”ì—ì„œ **Multi Benchmark Comparison** ì›Œí¬í”Œë¡œìš° ì„ íƒ
3. **Run workflow** ë²„íŠ¼ í´ë¦­
4. ì…ë ¥ ê°’ ì„¤ì •:
   - `configurations`: ì‹¤í–‰í•  ë²¤ì¹˜ë§ˆí¬ ì¡°í•©
     - `all`: baseline, with-turbo, parallel-builds, all-optimizations (4ê°€ì§€)
     - `cache-only`: baseline vs with-turbo (ìºì‹œ íš¨ê³¼ë§Œ ë¹„êµ)
     - `build-only`: baseline vs parallel-builds (ë³‘ë ¬ ë¹Œë“œ íš¨ê³¼ë§Œ ë¹„êµ)
   - `run_count`: ì‹¤í–‰ íšŸìˆ˜ (ê¸°ë³¸ê°’: 3)
5. **Run workflow** ë²„íŠ¼ í´ë¦­í•˜ì—¬ ì‹¤í–‰

**ì¥ì **:
- âœ… í•œ ë²ˆì— ëª¨ë“  ì¡°í•© ìë™ í…ŒìŠ¤íŠ¸
- âœ… ìë™ìœ¼ë¡œ ë¹„êµ ë¦¬í¬íŠ¸ ìƒì„±
- âœ… baseline ëŒ€ë¹„ ê°œì„ ìœ¨ ìë™ ê³„ì‚°
- âœ… ìµœì ì˜ ì„¤ì • ìë™ ì¶”ì²œ

### 2. ê°œë³„ ë²¤ì¹˜ë§ˆí¬ ì‹¤í–‰ (ì„¸ë°€í•œ ì œì–´)

1. GitHub ì €ì¥ì†Œì˜ **Actions** íƒ­ìœ¼ë¡œ ì´ë™
2. ì™¼ìª½ ì‚¬ì´ë“œë°”ì—ì„œ **Build Performance Benchmark** ì›Œí¬í”Œë¡œìš° ì„ íƒ
3. **Run workflow** ë²„íŠ¼ í´ë¦­
4. ì…ë ¥ ê°’ ì„¤ì •:
   - `benchmark_name`: ë²¤ì¹˜ë§ˆí¬ ì´ë¦„ (ì˜ˆ: `baseline`, `optimized-v1`, `turbo-cache-enabled`)
   - `run_count`: ì‹¤í–‰ íšŸìˆ˜ (ê¸°ë³¸ê°’: 3) - í‰ê· ê°’ ê³„ì‚°ì„ ìœ„í•´ ì—¬ëŸ¬ ë²ˆ ì‹¤í–‰
   - `include_deploy`: S3 ë°°í¬ ë²¤ì¹˜ë§ˆí¬ í¬í•¨ ì—¬ë¶€
5. **Run workflow** ë²„íŠ¼ í´ë¦­í•˜ì—¬ ì‹¤í–‰

### 3. ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼ í™•ì¸

ì‹¤í–‰ì´ ì™„ë£Œë˜ë©´:

- **GitHub Step Summary**ì—ì„œ ì¦‰ì‹œ ê²°ê³¼ í™•ì¸ ê°€ëŠ¥
  - Multi Benchmark: ëª¨ë“  ì„¤ì •ì˜ ë¹„êµí‘œì™€ ì¶”ì²œì‚¬í•­
  - Single Benchmark: ê°œë³„ ì‹¤í–‰ ê²°ê³¼
- `benchmarks/` ë””ë ‰í† ë¦¬ì— JSON íŒŒì¼ë¡œ ìë™ ì €ì¥ë¨
- Artifactsì—ì„œ ìƒì„¸ ê²°ê³¼ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥ (90ì¼ ë³´ê´€)

## ğŸ“ˆ ë²¤ì¹˜ë§ˆí¬ ë¹„êµ ë°©ë²•

ë‘ ê°œì˜ ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼ë¥¼ ë¹„êµí•˜ë ¤ë©´:

```bash
# ë¹„êµ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
node scripts/compare-benchmarks.js <baseline-id> <optimized-id>

# ì˜ˆì‹œ
node scripts/compare-benchmarks.js baseline-20250124-120000 optimized-v1-20250124-130000
```

### ì¶œë ¥ ì˜ˆì‹œ

```
ğŸ“Š Benchmark Comparison

Baseline:  baseline-20250124-120000
Optimized: optimized-v1-20250124-130000

Environment
  Runner: ubuntu-latest
  Node.js: 22
  pnpm: 9.15.0

Phase                | Before â†’  After | Change     | Time Saved
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Checkout           |    5s â†’    5s | +0.0%      | +0s
  pnpm Setup         |    3s â†’    3s | +0.0%      | +0s
  Node.js Setup      |   12s â†’    8s | -33.3%     | +4s
  Dependencies       |  120s â†’   45s | -62.5%     | +75s
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Setup Total          |  140s â†’   61s | -56.4%     | +79s
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Client Build       |   85s â†’   35s | -58.8%     | +50s
  Admin Build        |   78s â†’   32s | -59.0%     | +46s
  Accounts Build     |   72s â†’   30s | -58.3%     | +42s
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Build Total          |  235s â†’   97s | -58.7%     | +138s
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL                |  375s â†’  158s | -57.9%     | +217s
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ˆ Summary

âœ“ Build ì†ë„ê°€ 217ì´ˆ (57.9%) ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤!

ì£¼ìš” ê°œì„  ì˜ì—­:
  1. Build: 138s (58.7%) ê°œì„ 
  2. Setup: 79s (56.4%) ê°œì„ 
```

## ğŸ¯ ë²¤ì¹˜ë§ˆí¬ ì„¤ì • ì„¤ëª…

### ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ì„¤ì •ë“¤

Multi Benchmark Comparison ì›Œí¬í”Œë¡œìš°ëŠ” ë‹¤ìŒ ì„¤ì •ë“¤ì„ ìë™ìœ¼ë¡œ ì‹¤í–‰í•˜ê³  ë¹„êµí•©ë‹ˆë‹¤:

| ì„¤ì • | pnpm Cache | Turbo Local | S3 Remote | Region | ë³‘ë ¬ ë¹Œë“œ | ì„¤ëª… |
|------|------------|-------------|-----------|---------|-----------|------|
| **baseline** | âŒ | âŒ | âŒ | - | âŒ | ì™„ì „ í´ë¦° ë¹Œë“œ (ê¸°ì¤€ì ) |
| **with-pnpm-cache** | âœ… | âŒ | âŒ | - | âŒ | pnpm ìºì‹œë§Œ ì ìš© |
| **with-turbo-cache** | âœ… | âœ… | âŒ | - | âŒ | pnpm + Turbo ë¡œì»¬ ìºì‹œ |
| **with-s3-apne2** | âœ… | âŒ | âœ… | ap-northeast-2 | âŒ | pnpm + S3 ì›ê²© ìºì‹œ (ì„œìš¸) |
| **with-s3-usea1** | âœ… | âŒ | âœ… | us-east-1 | âŒ | pnpm + S3 ì›ê²© ìºì‹œ (ë²„ì§€ë‹ˆì•„) |
| **parallel-builds** | âœ… | âŒ | âŒ | - | âœ… | pnpm + ë³‘ë ¬ ë¹Œë“œ |
| **all-optimizations** | âœ… | âœ… | âŒ | - | âœ… | pnpm + Turbo ë¡œì»¬ + ë³‘ë ¬ ë¹Œë“œ |
| **all-with-s3-apne2** | âœ… | âŒ | âœ… | ap-northeast-2 | âœ… | pnpm + S3 ì›ê²© + ë³‘ë ¬ ë¹Œë“œ |

### ì„¤ì •ë³„ ê¸°ëŒ€ íš¨ê³¼

1. **baseline** (ê¸°ì¤€ì„ )
   - ì™„ì „ í´ë¦° ë¹Œë“œ (ìºì‹œ ì—†ìŒ)
   - ë‹¤ë¥¸ ì„¤ì •ê³¼ ë¹„êµí•˜ê¸° ìœ„í•œ ê¸°ì¤€ì 

2. **with-pnpm-cache** (pnpm ìºì‹œ)
   - node_modules ì¬ì‚¬ìš©ìœ¼ë¡œ ì˜ì¡´ì„± ì„¤ì¹˜ ì‹œê°„ ë‹¨ì¶•
   - ê¸°ëŒ€ ê°œì„ : Setup ì‹œê°„ 30-50% ë‹¨ì¶•

3. **with-turbo-cache** (pnpm + Turbo ë¡œì»¬ ìºì‹œ)
   - pnpm ìºì‹œ + Turbo ë¹Œë“œ ê²°ê³¼ë¬¼ ë¡œì»¬ ì¬ì‚¬ìš©
   - ê¸°ëŒ€ ê°œì„ : ë¹Œë“œ ì‹œê°„ 50-70% ë‹¨ì¶•

4. **with-s3-apne2 / with-s3-usea1** (pnpm + S3 ì›ê²© ìºì‹œ)
   - pnpm ìºì‹œ + S3ì— ì €ì¥ëœ Turbo ë¹Œë“œ ê²°ê³¼ë¬¼ ì¬ì‚¬ìš©
   - Regionë³„ ë„¤íŠ¸ì›Œí¬ ì§€ì—°ì‹œê°„ ë¹„êµ ê°€ëŠ¥
   - ê¸°ëŒ€ ê°œì„ : ë¹Œë“œ ì‹œê°„ 40-60% ë‹¨ì¶•
   - Region ì˜í–¥: ap-northeast-2ê°€ GitHub Actions runnerì™€ ë” ê°€ê¹Œìš¸ ê²½ìš° ë” ë¹ ë¦„

5. **parallel-builds** (pnpm + ë³‘ë ¬ ë¹Œë“œ)
   - pnpm ìºì‹œ + client, admin, accounts ë™ì‹œ ë¹Œë“œ
   - ê¸°ëŒ€ ê°œì„ : ë¹Œë“œ ì‹œê°„ 30-50% ë‹¨ì¶•

6. **all-optimizations** (ì „ì²´ ìµœì í™” - ë¡œì»¬ ìºì‹œ)
   - pnpm + Turbo ë¡œì»¬ ìºì‹œ + ë³‘ë ¬ ë¹Œë“œ ì¡°í•©
   - ê¸°ëŒ€ ê°œì„ : ì „ì²´ ì‹œê°„ 60-80% ë‹¨ì¶•

7. **all-with-s3-apne2** (ì „ì²´ ìµœì í™” - S3 ì›ê²© ìºì‹œ)
   - pnpm + S3 ì›ê²© ìºì‹œ + ë³‘ë ¬ ë¹Œë“œ ì¡°í•©
   - íŒ€ ê°„ ë¹Œë“œ ìºì‹œ ê³µìœ  ê°€ëŠ¥
   - ê¸°ëŒ€ ê°œì„ : ì „ì²´ ì‹œê°„ 55-75% ë‹¨ì¶•

## â˜ï¸ S3 Remote Cache ì„¤ì • ë°©ë²•

S3 ì›ê²© ìºì‹œë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤:

### 1. S3 Bucket ìƒì„±

```bash
# ap-northeast-2 (ì„œìš¸) regionì— bucket ìƒì„±
aws s3 mb s3://turbo-cache-ap-northeast-2 --region ap-northeast-2

# us-east-1 (ë²„ì§€ë‹ˆì•„) regionì— bucket ìƒì„±
aws s3 mb s3://turbo-cache-us-east-1 --region us-east-1
```

### 2. GitHub Secrets ì„¤ì •

GitHub CLIë¥¼ ì‚¬ìš©í•˜ì—¬ AWS ìê²©ì¦ëª…ì„ ì„¤ì •í•©ë‹ˆë‹¤:

```bash
# AWS ìê²©ì¦ëª… ì„¤ì •
gh secret set AWS_ACCESS_KEY_ID --body "your-access-key-id"
gh secret set AWS_SECRET_ACCESS_KEY --body "your-secret-access-key"
```

### 3. ë²¤ì¹˜ë§ˆí¬ ì‹¤í–‰

ì„¤ì •ì´ ì™„ë£Œë˜ë©´ `cache-only` ë˜ëŠ” `all` ì„¤ì •ìœ¼ë¡œ ë²¤ì¹˜ë§ˆí¬ë¥¼ ì‹¤í–‰í•˜ì—¬ S3 ì›ê²© ìºì‹œ ì„±ëŠ¥ì„ ì¸¡ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 4. Region ë¹„êµ ë¶„ì„

ë¦¬í¬íŠ¸ì—ì„œ ìë™ìœ¼ë¡œ ë‹¤ìŒ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤:
- ap-northeast-2 vs us-east-1 ì„±ëŠ¥ ë¹„êµ
- ë„¤íŠ¸ì›Œí¬ ì§€ì—°ì‹œê°„ ì˜í–¥ ë¶„ì„
- ìµœì  region ì¶”ì²œ

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
benchmarks/
â”œâ”€â”€ README.md                        # ì´ íŒŒì¼
â”œâ”€â”€ index.json                       # ëª¨ë“  ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼ ì¸ë±ìŠ¤
â”œâ”€â”€ baseline-20250124-120000.json   # ê°œë³„ ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼
â”œâ”€â”€ optimized-v1-20250124-130000.json
â””â”€â”€ ...
```

### ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼ íŒŒì¼ êµ¬ì¡°

```json
{
  "benchmark_id": "baseline-20250124-120000",
  "benchmark_name": "baseline",
  "timestamp": "2025-01-24T12:00:00Z",
  "environment": {
    "runner": "ubuntu-latest",
    "node_version": "22",
    "pnpm_version": "9.15.0"
  },
  "results": [
    {
      "run_number": 1,
      "timings": {
        "checkout": 5,
        "pnpm_setup": 3,
        "node_setup": 12,
        "dependencies": 120,
        "setup_total": 140,
        "client_build": 85,
        "admin_build": 78,
        "accounts_build": 72,
        "build_total": 235,
        "total": 375
      }
    }
  ],
  "summary": {
    "avg_total_seconds": 375,
    "run_count": 3
  }
}
```

## ğŸ”„ ê¶Œì¥ ì›Œí¬í”Œë¡œìš°

### ë°©ë²• 1: ë¹ ë¥¸ ì „ì²´ ë¹„êµ (ê¶Œì¥)

1. **Multi Benchmark Comparison ì‹¤í–‰**
   ```bash
   Actions â†’ Multi Benchmark Comparison â†’ Run workflow
   configurations: all
   run_count: 3
   ```

2. **GitHub Step Summaryì—ì„œ ê²°ê³¼ í™•ì¸**
   - ëª¨ë“  ì„¤ì •ì˜ ì„±ëŠ¥ ë¹„êµí‘œ
   - baseline ëŒ€ë¹„ ê°œì„ ìœ¨
   - ìµœì  ì„¤ì • ì¶”ì²œ

3. **ìµœì  ì„¤ì • ì„ íƒ ë° ì ìš©**

### ë°©ë²• 2: ë‹¨ê³„ë³„ ìµœì í™”

1. **Baseline ì¸¡ì •**
   ```bash
   Actions â†’ Build Performance Benchmark â†’ Run workflow
   benchmark_name: baseline
   run_count: 3
   ```

2. **ìµœì í™” ì ìš©**
   - ì½”ë“œ ë³€ê²½ ë° ì›Œí¬í”Œë¡œìš° ìˆ˜ì •

3. **ìµœì í™” í›„ ì¸¡ì •**
   ```bash
   Actions â†’ Build Performance Benchmark â†’ Run workflow
   benchmark_name: optimized-v1
   run_count: 3
   ```

4. **ê²°ê³¼ ë¹„êµ**
   ```bash
   node scripts/compare-benchmarks.js baseline-YYYYMMDD-HHMMSS optimized-v1-YYYYMMDD-HHMMSS
   ```

5. **ì„±ëŠ¥ ê°œì„  í™•ì¸ ë° ë¬¸ì„œí™”**

## ğŸ“ ì£¼ì˜ì‚¬í•­

- ë²¤ì¹˜ë§ˆí¬ëŠ” GitHub Actions runnerì˜ ìƒíƒœì— ë”°ë¼ ë³€ë™ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ì •í™•í•œ ë¹„êµë¥¼ ìœ„í•´ ìµœì†Œ 3íšŒ ì´ìƒ ì‹¤í–‰í•˜ì—¬ í‰ê· ê°’ì„ ì‚¬ìš©í•˜ì„¸ìš”
- ê°™ì€ ì‹œê°„ëŒ€ì— ì¸¡ì •í•˜ë©´ ë” ì •í™•í•œ ë¹„êµê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤
- Cold cache vs Warm cache ìƒíƒœë¥¼ ê³ ë ¤í•˜ì„¸ìš”

## ğŸ¯ ëª©í‘œ ì„±ëŠ¥

| ë‹¨ê³„ | ëª©í‘œ ê°œì„ ë¥  | ì˜ˆìƒ ì‹œê°„ ì ˆê° |
|------|------------|---------------|
| ë³‘ë ¬ ë¹Œë“œ | 40-60% | 2-3ë¶„ |
| Turbo ìºì‹œ | 50-70% | 3-4ë¶„ |
| ì¢…ì†ì„± ìºì‹± | 30-40% | 1-2ë¶„ |
| ì „ì²´ ìµœì í™” | 60-80% | 4-6ë¶„ |

## ğŸ“ ë¬¸ì˜

ë²¤ì¹˜ë§ˆí¬ ê´€ë ¨ ë¬¸ì˜ì‚¬í•­ì´ë‚˜ ê°œì„  ì œì•ˆì€ ì´ìŠˆë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.
